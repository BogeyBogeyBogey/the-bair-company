<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Bair Company</title>
<meta name="description" content="The Bair Company — Creatief bureau voor merken die durven opvallen.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="https://images.unsplash.com">
<link rel="preconnect" href="https://images.unsplash.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@600;700;800&family=DM+Sans:wght@300;400;500&family=Instrument+Serif:ital@1&display=swap" rel="stylesheet">
<style>
:root {
  --black: #0a0a0a;
  --white: #f0ede8;
  --grey: #666;
  --accent: #2E8AFF;
  --pink: #ec4899;
  --amber: #f59e0b;
  --emerald: #10b981;
  --red: #ef4444;
  --font-display: 'Syne', system-ui, sans-serif;
  --font-body: 'DM Sans', -apple-system, sans-serif;
  --font-serif: 'Instrument Serif', Georgia, serif;
  --ease: cubic-bezier(0.16, 1, 0.3, 1);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; scrollbar-width: none; }
::-webkit-scrollbar { width: 0; height: 0; }
body {
  background: var(--black);
  color: var(--white);
  font-family: var(--font-body);
  font-weight: 300;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}
a { color: inherit; text-decoration: none; }
button { font-family: inherit; cursor: pointer; border: none; background: none; color: inherit; }
::selection { background: var(--accent); color: var(--black); }

/* ── LOADER ── */
.loader {
  position: fixed; inset: 0; z-index: 9999;
  background: var(--black);
  display: flex; align-items: center; justify-content: center;
  transition: opacity 0.25s var(--ease), visibility 0.25s;
  will-change: opacity;
}
.loader.done { opacity: 0; visibility: hidden; pointer-events: none; }
.loader-word {
  font-family: var(--font-display);
  font-size: clamp(1.5rem, 4vw, 3rem);
  font-weight: 700;
  letter-spacing: 0.3em;
  text-transform: uppercase;
  overflow: hidden;
}
.loader-word span {
  display: inline-block;
  transform: translateY(120%);
  animation: loaderUp 0.4s var(--ease) forwards;
}
@keyframes loaderUp { to { transform: translateY(0); } }

/* ── HEADER ── */
header {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  display: flex; align-items: center; justify-content: space-between;
  padding: 1.75rem 2.5rem;
  background: rgba(10,10,10,0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  transform: translateZ(0);
}
.brand {
  font-family: var(--font-display);
  font-size: 1rem; font-weight: 700;
  letter-spacing: 0.2em; text-transform: uppercase;
}
.nav-pills { display: flex; gap: 0.5rem; }
.nav-pill {
  padding: 0.5rem 1.5rem;
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 100px;
  font-size: 0.8rem; letter-spacing: 0.05em;
  transition: all 0.3s var(--ease);
}
.nav-pill:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.4); }
.menu-btn { display: none; font-size: 0.8rem; letter-spacing: 0.15em; text-transform: uppercase; }

.mobile-nav {
  position: fixed; inset: 0; z-index: 99;
  background: var(--black);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 2rem;
  opacity: 0; visibility: hidden;
  transition: all 0.5s var(--ease);
}
.mobile-nav.open { opacity: 1; visibility: visible; }
.mobile-nav a {
  font-family: var(--font-display);
  font-size: 2.5rem; font-weight: 600;
  transition: opacity 0.3s;
}
.mobile-nav a:hover { opacity: 0.4; }

/* ── HERO ── */
.hero {
  min-height: 100vh;
  display: flex; flex-direction: column;
  justify-content: center; align-items: center;
  text-align: center; padding: 0 2rem;
  position: relative;
}
.hero-tagline {
  font-size: 0.7rem; letter-spacing: 0.3em;
  text-transform: uppercase; color: var(--grey);
  margin-bottom: 2rem;
  opacity: 0; animation: fadeIn 0.6s 0.55s var(--ease) forwards;
}
.hero-title {
  font-family: var(--font-display);
  font-size: clamp(3rem, 8vw, 7.5rem);
  font-weight: 800; line-height: 0.95;
  letter-spacing: -0.03em; max-width: 900px;
  opacity: 0; transform: translateY(30px);
  animation: fadeUp 0.8s 0.65s var(--ease) forwards;
}
.hero-title .serif {
  font-family: var(--font-serif);
  font-weight: 400; font-style: italic;
}
.hero-scroll {
  position: absolute; bottom: 2.5rem;
  font-size: 0.65rem; letter-spacing: 0.3em;
  text-transform: uppercase; color: var(--grey);
  opacity: 0; animation: fadeIn 0.6s 1.1s var(--ease) forwards;
}
.hero-scroll::after {
  content: ''; display: block;
  width: 1px; height: 40px;
  background: var(--grey);
  margin: 0.75rem auto 0;
  animation: scrollPulse 2s ease infinite;
}
@keyframes scrollPulse { 0%,100% { opacity: 0.2; height: 40px; } 50% { opacity: 0.8; height: 55px; } }
@keyframes fadeIn { to { opacity: 1; } }
@keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

/* ══════════════════════════════════════════
   PORTFOLIO — Horizontal Drag Gallery
   with VIDEO-STYLE TRAILER reels
   ══════════════════════════════════════════ */
.portfolio {
  padding: 6rem 0 8rem;
  overflow: hidden;
}
.portfolio-header {
  padding: 0 2.5rem; margin-bottom: 3rem;
  display: flex; justify-content: space-between; align-items: flex-end;
}
.portfolio-label {
  font-size: 0.7rem; letter-spacing: 0.25em;
  text-transform: uppercase; color: var(--grey);
  margin-bottom: 0.75rem;
}
.portfolio-title {
  font-family: var(--font-display);
  font-size: clamp(2rem, 4vw, 3.5rem);
  font-weight: 700; letter-spacing: -0.02em;
}
.portfolio-hint {
  display: flex; align-items: center; gap: 0.75rem;
}
.hint-text {
  font-size: 0.7rem; color: var(--grey); letter-spacing: 0.2em;
  text-transform: uppercase; white-space: nowrap;
}
.hint-line {
  display: block; width: 60px; height: 1px;
  background: var(--grey); position: relative; overflow: hidden;
}
.hint-line::after {
  content: ''; position: absolute; top: 0; left: -100%;
  width: 100%; height: 100%;
  background: var(--white);
  animation: hintSlide 2s ease-in-out infinite;
}
@keyframes hintSlide {
  0% { left: -100%; }
  50% { left: 0; }
  100% { left: 100%; }
}

.drag-track {
  display: flex; gap: 2rem;
  padding: 0 2.5rem;
  cursor: grab; user-select: none;
  will-change: transform;
}
.drag-track.dragging { cursor: grabbing; }

/* ── PROJECT CARD ── */
.project-card {
  flex-shrink: 0;
  width: 400px;
  border-radius: 1.25rem;
  overflow: hidden;
  background: #111;
  transition: transform 0.45s var(--ease), box-shadow 0.45s var(--ease), filter 0.45s var(--ease);
  position: relative;
  display: block;
  filter: brightness(0.75);
  contain: layout style;
  will-change: transform, filter;
}
.project-card.center-card {
  transform: scale(1.08);
  box-shadow: 0 30px 80px rgba(0,0,0,0.5);
  filter: brightness(1);
  z-index: 2;
}
.project-card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 30px 80px rgba(0,0,0,0.6);
  filter: brightness(1);
}
.project-card.center-card:hover {
  transform: translateY(-8px) scale(1.1);
}

/* ── VIDEO MODAL ── */
.video-modal {
  position: fixed; inset: 0; z-index: 9998;
  background: rgba(0,0,0,0.92);
  display: flex; align-items: center; justify-content: center;
  opacity: 0; visibility: hidden;
  transition: opacity 0.4s var(--ease), visibility 0.4s;
  cursor: pointer;
}
.video-modal.active { opacity: 1; visibility: visible; }
.video-modal video {
  max-width: 90vw; max-height: 85vh;
  border-radius: 1rem;
  box-shadow: 0 40px 120px rgba(0,0,0,0.8);
}
.video-modal-close {
  position: absolute; top: 1.5rem; right: 1.5rem;
  width: 48px; height: 48px; border-radius: 50%;
  background: rgba(255,255,255,0.1);
  display: flex; align-items: center; justify-content: center;
  font-size: 1.5rem; color: var(--white);
  backdrop-filter: blur(10px);
  transition: background 0.3s, transform 0.3s;
  cursor: pointer; z-index: 2;
}
.video-modal-close:hover { background: rgba(255,255,255,0.2); transform: scale(1.1); }
.video-modal-title {
  position: absolute; bottom: 2rem; left: 50%;
  transform: translateX(-50%);
  font-family: var(--font-display); font-size: 1rem;
  font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase;
  color: rgba(240,237,232,0.6);
}
.project-card { cursor: pointer; }

/* ── REEL VIEWPORT — Video-style trailer ── */
.reel-viewport {
  width: 100%;
  aspect-ratio: 3/4;
  overflow: hidden;
  position: relative;
  background: #0d0d0d;
}
/* ── Video cards ── */
.card-video {
  position: absolute;
  inset: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  opacity: 0.4;
  transition: opacity 0.6s var(--ease);
  background: #1a1a1a;
  transform: translateZ(0);
}
.has-video:hover .card-video,
.has-video.mobile-active .card-video {
  opacity: 1;
}
/* Gradient placeholder while video loads */
.has-video .reel-viewport::before {
  content: '';
  position: absolute; inset: 0; z-index: 0;
  background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 50%, #1a1a1a 100%);
  animation: shimmer 2s ease-in-out infinite;
}
.has-video .card-video[data-loaded="true"] ~ .reel-viewport::before,
.has-video .reel-viewport:has(.card-video[data-loaded="true"])::before {
  display: none;
}
@keyframes shimmer {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

/* Each slide is a full-cover image */
.reel-slide {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  opacity: 0;
  transition: opacity 0.8s ease-in-out;
  /* Ken Burns effect */
  transform: scale(1) translateZ(0);
  animation: none;
  will-change: opacity, transform;
}
.reel-slide:first-child {
  opacity: 1; /* Show first slide by default */
}
.reel-slide.active {
  opacity: 1;
}
.reel-slide.active.kenburns {
  animation: kenBurns 4s ease-in-out forwards;
}

@keyframes kenBurns {
  0% { transform: scale(1) translate(0, 0); }
  100% { transform: scale(1.08) translate(-1%, -1%); }
}

/* Progress bar at bottom of reel */
.reel-progress {
  position: absolute;
  bottom: 0; left: 0;
  height: 2px;
  background: rgba(255,255,255,0.6);
  z-index: 6;
  width: 0%;
  transition: width 0.3s linear;
}
.project-card:hover .reel-progress {
  animation: progressFill var(--reel-duration, 12s) linear infinite;
}
@keyframes progressFill {
  0% { width: 0%; }
  100% { width: 100%; }
}

/* Slide counter */
.reel-counter {
  position: absolute;
  top: 1rem; right: 1rem;
  z-index: 5;
  font-size: 0.65rem;
  letter-spacing: 0.15em;
  color: rgba(255,255,255,0.5);
  font-family: var(--font-display);
  font-weight: 600;
  opacity: 0;
  transition: opacity 0.4s var(--ease);
}
.project-card:hover .reel-counter { opacity: 1; }

/* Slide label overlay — shows what's on screen */
.reel-label {
  position: absolute;
  top: 1rem; left: 1rem;
  z-index: 5;
  display: flex; align-items: center; gap: 0.5rem;
  opacity: 0;
  transition: opacity 0.4s var(--ease);
}
.project-card:hover .reel-label { opacity: 1; }
.reel-label-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: #ff3b30;
  animation: blink 1.5s ease infinite;
}
@keyframes blink { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }
.reel-label-text {
  font-size: 0.6rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: rgba(255,255,255,0.7);
  font-weight: 500;
  text-shadow: 0 1px 4px rgba(0,0,0,0.8);
}

/* Gradient vignette */
.reel-vignette {
  position: absolute; inset: 0; z-index: 3;
  pointer-events: none;
  background:
    linear-gradient(to bottom, rgba(10,10,10,0.5) 0%, transparent 20%, transparent 75%, rgba(10,10,10,0.85) 100%),
    linear-gradient(to right, rgba(10,10,10,0.2) 0%, transparent 15%, transparent 85%, rgba(10,10,10,0.2) 100%);
}

/* Play indicator */
.reel-play {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%) scale(1);
  z-index: 4;
  width: 52px; height: 52px;
  border-radius: 50%;
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  display: flex; align-items: center; justify-content: center;
  opacity: 1;
  transition: all 0.4s var(--ease);
  border: 1px solid rgba(255,255,255,0.15);
}
.reel-play::after {
  content: '';
  display: block;
  width: 0; height: 0;
  border-style: solid;
  border-width: 8px 0 8px 14px;
  border-color: transparent transparent transparent var(--white);
  margin-left: 3px;
}
.project-card:hover .reel-play {
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.5);
}

/* Color stripe */
.card-stripe {
  position: absolute; bottom: 0; left: 0; right: 0;
  height: 3px; z-index: 7;
  transform: scaleX(0);
  transition: transform 0.5s var(--ease);
}
.project-card:hover .card-stripe { transform: scaleX(1); }

/* Card info (below the reel) */
.card-info {
  padding: 1.25rem 1.5rem 1.5rem;
  display: flex; justify-content: space-between; align-items: flex-start;
}
.card-meta h3 {
  font-family: var(--font-display);
  font-size: 1.15rem; font-weight: 600;
  margin-bottom: 0.2rem;
}
.card-meta span {
  font-size: 0.7rem; color: var(--grey);
  letter-spacing: 0.05em;
}
.card-arrow {
  width: 36px; height: 36px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.15);
  display: flex; align-items: center; justify-content: center;
  font-size: 0.9rem;
  transition: all 0.3s var(--ease);
  flex-shrink: 0;
}
.project-card:hover .card-arrow {
  background: var(--white);
  color: var(--black);
  border-color: var(--white);
}

/* ── DIENSTEN ── */
.diensten {
  padding: 8rem 2.5rem;
  border-top: 1px solid rgba(255,255,255,0.06);
  content-visibility: auto;
  contain-intrinsic-size: auto 800px;
}
.diensten-grid {
  margin-top: 4rem;
  display: grid; grid-template-columns: repeat(3, 1fr);
}
.dienst {
  padding: 2.5rem 2rem;
  border: 1px solid rgba(255,255,255,0.06);
  border-right: none;
  transition: background 0.4s var(--ease);
  cursor: pointer;
}
.dienst:nth-child(3n) { border-right: 1px solid rgba(255,255,255,0.06); }
.dienst:nth-child(n+4) { border-top: none; }
.dienst:hover { background: rgba(255,255,255,0.03); }
.dienst-num {
  font-family: var(--font-display);
  font-size: 0.7rem; letter-spacing: 0.2em;
  color: var(--grey); margin-bottom: 1.5rem;
}
.dienst-header {
  display: flex; justify-content: space-between; align-items: center;
}
.dienst h4 {
  font-family: var(--font-display);
  font-size: 1.2rem; font-weight: 600;
  margin-bottom: 0.75rem;
}
.dienst-toggle {
  width: 28px; height: 28px; border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.15);
  display: flex; align-items: center; justify-content: center;
  font-size: 1.1rem; color: var(--grey);
  transition: all 0.3s var(--ease); flex-shrink: 0;
  margin-top: -0.5rem;
}
.dienst.open .dienst-toggle {
  transform: rotate(45deg);
  background: var(--white); color: var(--black);
  border-color: var(--white);
}
.dienst p { font-size: 0.85rem; line-height: 1.7; color: var(--grey); }
.dienst-details {
  max-height: 0; overflow: hidden;
  transition: max-height 0.5s var(--ease), opacity 0.4s var(--ease), margin 0.4s var(--ease);
  opacity: 0; margin-top: 0;
}
.dienst.open .dienst-details {
  max-height: 500px; opacity: 1; margin-top: 1.25rem;
}
.dienst-details p {
  font-size: 0.85rem; line-height: 1.8; color: rgba(240,237,232,0.7);
  margin-bottom: 0.75rem;
}
.dienst-details .dienst-cta {
  display: inline-block; margin-top: 0.5rem;
  font-size: 0.75rem; letter-spacing: 0.15em;
  text-transform: uppercase; color: var(--accent);
  font-weight: 500; transition: opacity 0.3s;
}
.dienst-details .dienst-cta:hover { opacity: 0.7; }

/* ── OVER ── */
.over {
  padding: 8rem 2.5rem;
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 6rem; align-items: start;
  border-top: 1px solid rgba(255,255,255,0.06);
  content-visibility: auto;
  contain-intrinsic-size: auto 500px;
}
.over-left .section-label {
  font-size: 0.7rem; letter-spacing: 0.25em;
  text-transform: uppercase; color: var(--grey);
  margin-bottom: 1.5rem;
}
.over-quote {
  font-family: var(--font-serif);
  font-size: clamp(1.8rem, 3vw, 2.8rem);
  font-style: italic; line-height: 1.4;
}
.over-right p {
  font-size: 1rem; line-height: 1.8;
  color: var(--grey); margin-bottom: 1.25rem;
}
.over-stats { margin-top: 3rem; display: flex; gap: 3rem; }
.stat-val { font-family: var(--font-display); font-size: 2rem; font-weight: 700; }
.stat-label {
  font-size: 0.7rem; letter-spacing: 0.15em;
  text-transform: uppercase; color: var(--grey); margin-top: 0.25rem;
}

/* ── CONTACT ── */
.contact-cta {
  padding: 10rem 2.5rem; text-align: center;
  border-top: 1px solid rgba(255,255,255,0.06);
  content-visibility: auto;
  contain-intrinsic-size: auto 400px;
}
.contact-cta h2 {
  font-family: var(--font-display);
  font-size: clamp(2.5rem, 6vw, 5rem);
  font-weight: 800; line-height: 1; letter-spacing: -0.03em;
  margin-bottom: 1.5rem;
}
.contact-cta h2 .serif { font-family: var(--font-serif); font-weight: 400; font-style: italic; }
.contact-cta p { color: var(--grey); font-size: 1rem; margin-bottom: 2.5rem; }
.cta-btn {
  display: inline-block; padding: 1rem 3rem;
  background: var(--white); color: var(--black);
  border-radius: 100px; font-size: 0.85rem;
  font-weight: 500; letter-spacing: 0.1em;
  transition: transform 0.3s var(--ease), box-shadow 0.3s var(--ease);
}
.cta-btn:hover { transform: scale(1.05); box-shadow: 0 10px 40px rgba(255,255,255,0.1); }

/* ── FOOTER ── */
footer {
  padding: 2rem 2.5rem;
  border-top: 1px solid rgba(255,255,255,0.06);
  display: flex; justify-content: space-between; align-items: center;
  font-size: 0.75rem; color: var(--grey);
}
footer a { transition: color 0.3s; }
footer a:hover { color: var(--white); }
.footer-links { display: flex; gap: 2rem; }

/* ── REVEAL ── */
.reveal {
  opacity: 0; transform: translateY(30px);
  transition: opacity 0.7s var(--ease), transform 0.7s var(--ease);
  will-change: opacity, transform;
}
.reveal.vis { opacity: 1; transform: translateY(0); }
.reveal-d1 { transition-delay: 0.1s; }
.reveal-d2 { transition-delay: 0.2s; }

/* ── RESPONSIVE ── */
@media (max-width: 1024px) {
  .diensten-grid { grid-template-columns: 1fr 1fr; }
  .dienst:nth-child(2n) { border-right: 1px solid rgba(255,255,255,0.06); }
  .dienst:nth-child(odd):not(:first-child) { border-right: none; }
}
@media (max-width: 768px) {
  header { padding: 1.25rem 1.5rem; }
  .nav-pills { display: none; }
  .menu-btn { display: block; }
  .hero { padding: 0 1.5rem; }
  .portfolio-header { padding: 0 1.5rem; flex-direction: column; align-items: flex-start; gap: 0.5rem; }
  .drag-track { padding: 0 1.5rem; gap: 1.25rem; }
  .project-card { width: 320px; }
  .reel-play { display: none; }
  .card-video { opacity: 0.8; }  /* More visible on mobile since there's no hover */
  .has-video .card-video { opacity: 0.8; }
  .has-video.mobile-active .card-video { opacity: 1; }
  .diensten { padding: 5rem 1.5rem; }
  .diensten-grid { grid-template-columns: 1fr; }
  .dienst { border-right: 1px solid rgba(255,255,255,0.06) !important; }
  .dienst + .dienst { border-top: none; }
  .over { grid-template-columns: 1fr; gap: 3rem; padding: 5rem 1.5rem; }
  .over-stats { flex-wrap: wrap; gap: 2rem; }
  .contact-cta { padding: 6rem 1.5rem; }
  footer { flex-direction: column; gap: 1rem; text-align: center; padding: 2rem 1.5rem; }
}
@media (max-width: 480px) {
  .project-card { width: 280px; }
}
</style>
</head>
<body>

<!-- LOADER -->
<div class="loader" id="loader">
  <div class="loader-word">
    <span style="animation-delay:0.15s">T</span><span style="animation-delay:0.2s">H</span><span style="animation-delay:0.25s">E</span><span style="animation-delay:0.32s">&nbsp;</span><span style="animation-delay:0.38s">B</span><span style="animation-delay:0.44s">A</span><span style="animation-delay:0.5s">I</span><span style="animation-delay:0.56s">R</span><span style="animation-delay:0.66s">&nbsp;</span><span style="animation-delay:0.72s">C</span><span style="animation-delay:0.78s">O</span><span style="animation-delay:0.84s">.</span>
  </div>
</div>

<!-- HEADER -->
<header>
  <a href="#" class="brand">The Bair Co.</a>
  <nav class="nav-pills">
    <a href="#werk" class="nav-pill">Portfolio</a>
    <a href="#diensten" class="nav-pill">Studio</a>
    <a href="#over" class="nav-pill">Over</a>
    <a href="#contact" class="nav-pill">Contact</a>
  </nav>
  <button class="menu-btn" id="menuBtn">Menu</button>
</header>

<!-- MOBILE NAV -->
<div class="mobile-nav" id="mobileNav">
  <a href="#werk" onclick="closeMob()">Portfolio</a>
  <a href="#diensten" onclick="closeMob()">Studio</a>
  <a href="#over" onclick="closeMob()">Over</a>
  <a href="#contact" onclick="closeMob()">Contact</a>
</div>

<!-- HERO -->
<section class="hero">
  <p class="hero-tagline">Creatief bureau — Glabbeek</p>
  <h1 class="hero-title"><span class="serif">Merken</span> die blijven hangen</h1>
  <div class="hero-scroll">Scroll</div>
</section>

<!-- PORTFOLIO -->
<section class="portfolio" id="werk">
  <div class="portfolio-header reveal">
    <div>
      <h2 class="portfolio-title">Portfolio</h2>
    </div>
    <div class="portfolio-hint">
      <span class="hint-text">Sleep</span>
      <span class="hint-line"></span>
    </div>
  </div>

  <div class="drag-track" id="dragTrack">

    <!-- ▸ GiGi Money — Commercials & Social (FIRST — eye-catching) -->
    <div class="project-card has-video" data-project="gigi-socials" data-video="portfoliogigimoneysocials.mp4" style="--card-color: var(--pink);">
      <div class="reel-viewport">
        <video class="card-video" src="portfoliogigimoneysocials.mp4" muted loop playsinline preload="none"></video>
        <div class="reel-vignette"></div>
        <div class="reel-label">
          <div class="reel-label-dot"></div>
          <span class="reel-label-text">Showreel</span>
        </div>
        <div class="reel-play"></div>
        <div class="card-stripe" style="background: var(--pink);"></div>
      </div>
      <div class="card-info">
        <div class="card-meta">
          <h3>GiGi Money</h3>
          <span>Commercials · Social Media</span>
        </div>
        <div class="card-arrow">▶</div>
      </div>
    </div>

    <!-- ▸ Artoah -->
    <div class="project-card has-video" data-project="artoah" data-video="portfolioartoah.mp4" style="--card-color: var(--amber);">
      <div class="reel-viewport">
        <video class="card-video" src="portfolioartoah.mp4" muted loop playsinline preload="none"></video>
        <div class="reel-vignette"></div>
        <div class="reel-label">
          <div class="reel-label-dot"></div>
          <span class="reel-label-text">Showreel</span>
        </div>
        <div class="reel-play"></div>
        <div class="card-stripe" style="background: var(--amber);"></div>
      </div>
      <div class="card-info">
        <div class="card-meta">
          <h3>Artoah</h3>
          <span>Farm · Storytelling · Video</span>
        </div>
        <div class="card-arrow">▶</div>
      </div>
    </div>

    <!-- ▸ Rosing Security -->
    <div class="project-card has-video" data-project="rosing" data-video="portfoliorosign.mp4" style="--card-color: var(--red);">
      <div class="reel-viewport">
        <video class="card-video" src="portfoliorosign.mp4" muted loop playsinline preload="none"></video>
        <div class="reel-vignette"></div>
        <div class="reel-label">
          <div class="reel-label-dot"></div>
          <span class="reel-label-text">Showreel</span>
        </div>
        <div class="reel-play"></div>
        <div class="card-stripe" style="background: var(--red);"></div>
      </div>
      <div class="card-info">
        <div class="card-meta">
          <h3>Rosing Security</h3>
          <span>Security · Animatie · Web</span>
        </div>
        <div class="card-arrow">▶</div>
      </div>
    </div>

    <!-- ▸ GiGi Money — Site & App -->
    <div class="project-card has-video" data-project="gigi-site" data-video="portfoliogigimoneysiteandapp.mp4" style="--card-color: var(--accent);">
      <div class="reel-viewport">
        <video class="card-video" src="portfoliogigimoneysiteandapp.mp4" muted loop playsinline preload="none"></video>
        <div class="reel-vignette"></div>
        <div class="reel-label">
          <div class="reel-label-dot"></div>
          <span class="reel-label-text">Showreel</span>
        </div>
        <div class="reel-play"></div>
        <div class="card-stripe" style="background: var(--accent);"></div>
      </div>
      <div class="card-info">
        <div class="card-meta">
          <h3>GiGi Money</h3>
          <span>Fintech · Website · App</span>
        </div>
        <div class="card-arrow">▶</div>
      </div>
    </div>

    <!-- ▸ Hans van Hest -->
    <div class="project-card has-video" data-project="hvh" data-video="portfoliohansvanhest.mp4" style="--card-color: var(--emerald);">
      <div class="reel-viewport">
        <video class="card-video" src="portfoliohansvanhest.mp4" muted loop playsinline preload="none"></video>
        <div class="reel-vignette"></div>
        <div class="reel-label">
          <div class="reel-label-dot"></div>
          <span class="reel-label-text">Showreel</span>
        </div>
        <div class="reel-play"></div>
        <div class="card-stripe" style="background: var(--emerald);"></div>
      </div>
      <div class="card-info">
        <div class="card-meta">
          <h3>Hans van Hest — KBC</h3>
          <span>Verzekeringen · Landing page</span>
        </div>
        <div class="card-arrow">▶</div>
      </div>
    </div>

  </div>
</section>

<!-- DIENSTEN -->
<section class="diensten reveal" id="diensten">
  <p class="portfolio-label">Wat we doen</p>
  <h2 class="portfolio-title">Studio</h2>
  <div class="diensten-grid">
    <div class="dienst reveal" onclick="toggleDienst(this)">
      <div class="dienst-num">01</div>
      <div class="dienst-header"><h4>Branding & Identiteit</h4><div class="dienst-toggle">+</div></div>
      <p>Logo, huisstijl, merkstrategie. We geven jouw merk een gezicht dat werkt op elk touchpoint.</p>
      <div class="dienst-details">
        <p>Eerste indrukken tellen. Jouw merk heeft gemiddeld 7 seconden om te overtuigen. Wij zorgen ervoor dat elke seconde raak is — van logo en kleurenpalet tot tone of voice en merkrichtlijnen.</p>
        <p>Het resultaat? Een herkenbaar merk dat vertrouwen wekt en klanten aantrekt, nog vóór je eerste verkoopgesprek.</p>
        <a href="#contact" class="dienst-cta">Start jouw merktraject →</a>
      </div>
    </div>
    <div class="dienst reveal" onclick="toggleDienst(this)">
      <div class="dienst-num">02</div>
      <div class="dienst-header"><h4>Web Design</h4><div class="dienst-toggle">+</div></div>
      <p>Van wireframe tot pixel-perfect ontwerp. Interfaces die niet alleen mooi zijn maar ook intuïtief aanvoelen.</p>
      <div class="dienst-details">
        <p>94% van eerste indrukken online gaat over design. Wij ontwerpen websites die bezoekers vasthouden, door flows begeleiden en converteren. Geen template-werk, maar maatwerk dat jouw verhaal vertelt.</p>
        <p>Elke pixel heeft een doel. Elke interactie voelt vanzelfsprekend aan.</p>
        <a href="#contact" class="dienst-cta">Laat je site ontwerpen →</a>
      </div>
    </div>
    <div class="dienst reveal" onclick="toggleDienst(this)">
      <div class="dienst-num">03</div>
      <div class="dienst-header"><h4>Webontwikkeling</h4><div class="dienst-toggle">+</div></div>
      <p>Snelle, responsive websites gebouwd met moderne technologieën. Performance en schoonheid gaan samen.</p>
      <div class="dienst-details">
        <p>Een trage website kost je klanten — letterlijk. Elke seconde extra laadtijd verlaagt je conversie met 7%. Wij bouwen razendsnelle sites die scoren bij Google én bij je bezoekers.</p>
        <p>Van Next.js tot headless CMS: we kiezen de technologie die past bij jouw groeiambitie, niet wat hip is deze week.</p>
        <a href="#contact" class="dienst-cta">Bespreek je project →</a>
      </div>
    </div>
    <div class="dienst reveal" onclick="toggleDienst(this)">
      <div class="dienst-num">04</div>
      <div class="dienst-header"><h4>Social Media</h4><div class="dienst-toggle">+</div></div>
      <p>Content creatie en strategie die jouw merk zichtbaar maakt op de platformen die er toe doen.</p>
      <div class="dienst-details">
        <p>Posten zonder plan is schreeuwen in de leegte. Wij bouwen een contentstrategie die jouw doelgroep aanspreekt, engagement opbouwt en volgers omzet in klanten.</p>
        <p>Van Reels en carousels tot community management — consistent, on-brand en resultaatgericht.</p>
        <a href="#contact" class="dienst-cta">Boost je social presence →</a>
      </div>
    </div>
    <div class="dienst reveal" onclick="toggleDienst(this)">
      <div class="dienst-num">05</div>
      <div class="dienst-header"><h4>Marketing</h4><div class="dienst-toggle">+</div></div>
      <p>Campagnes die resultaat opleveren. Van strategie tot uitvoering, data-gedreven en creatief.</p>
      <div class="dienst-details">
        <p>Geen budget verspillen aan "zien wat het doet". Wij lanceren campagnes op basis van data, testen continu en optimaliseren tot elke euro rendeert.</p>
        <p>Google Ads, Meta campaigns, e-mail automation — alles meetbaar, alles traceerbaar, alles gericht op groei.</p>
        <a href="#contact" class="dienst-cta">Plan je campagne →</a>
      </div>
    </div>
    <div class="dienst reveal" onclick="toggleDienst(this)">
      <div class="dienst-num">06</div>
      <div class="dienst-header"><h4>Apps & Producten</h4><div class="dienst-toggle">+</div></div>
      <p>Digitale producten van concept tot lancering. UI/UX design en ontwikkeling onder één dak.</p>
      <div class="dienst-details">
        <p>Van idee tot App Store — wij begeleiden het volledige traject. Gebruikersonderzoek, prototyping, design, development en lancering. Geen eindeloze loops tussen verschillende bureaus.</p>
        <p>Eén team, één visie, één product dat je gebruikers niet meer willen missen.</p>
        <a href="#contact" class="dienst-cta">Start je product →</a>
      </div>
    </div>
  </div>
</section>

<!-- OVER -->
<section class="over reveal" id="over">
  <div class="over-left">
    <p class="section-label">Over ons</p>
    <h2 class="over-quote">Klein bureau, grote ambities — elk project krijgt onze volledige aandacht.</h2>
  </div>
  <div class="over-right">
    <p>The Bair Company is een creatief bureau dat gelooft in de kracht van goed design. We zijn bewust klein gebleven — geen lagen management, geen eindeloze vergaderingen.</p>
    <p>Gewoon directe lijnen, scherpe ideeën en werk waar we achter staan. We combineren design thinking met de nieuwste technologieën om merken te bouwen die niet alleen mooi zijn, maar ook écht werken.</p>
    <div class="over-stats">
      <div><div class="stat-val">4+</div><div class="stat-label">Projecten</div></div>
      <div><div class="stat-val">3+</div><div class="stat-label">Klanten</div></div>
      <div><div class="stat-val">∞</div><div class="stat-label">Koffie</div></div>
    </div>
  </div>
</section>

<!-- CONTACT -->
<section class="contact-cta reveal" id="contact">
  <h2>Klaar voor iets <span class="serif">moois</span>?</h2>
  <p>Vertel ons over jouw project. We luisteren graag.</p>
  <a href="mailto:kristofbogaerts@hotmail.com" class="cta-btn">Neem contact op</a>
</section>

<footer>
  <span>&copy; 2026 The Bair Company</span>
  <div class="footer-links">
    <a href="mailto:kristofbogaerts@hotmail.com">Email</a>
    <a href="#werk">Portfolio</a>
    <a href="#diensten">Studio</a>
  </div>
</footer>

<!-- VIDEO MODAL -->
<div class="video-modal" id="videoModal">
  <button class="video-modal-close" id="videoModalClose">✕</button>
  <video id="modalVideo" controls playsinline preload="none"></video>
  <div class="video-modal-title" id="modalTitle"></div>
</div>

<script>
// ══════════════════════════════════════════
// TRAILER REEL SYSTEM
// Each project card gets a slideshow of images
// that plays on hover, like a video trailer.
// Replace image URLs with real screenshots later!
// ══════════════════════════════════════════

const reelData = {
  rosing: {
    slides: [
      {
        image: 'https://images.unsplash.com/photo-1558002038-1055907df827?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Homepage'
      },
      {
        image: 'https://images.unsplash.com/photo-1557597774-9d273605dfa9?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Beveiligingssystemen'
      },
      {
        image: 'https://images.unsplash.com/photo-1585829365295-ab7cd400c167?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Diensten'
      },
      {
        image: 'https://images.unsplash.com/photo-1562408590-e32931084e23?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Camerabewaking'
      },
      {
        image: 'https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Contact'
      }
    ],
    interval: 2400
  },
  artoah: {
    slides: [
      {
        image: 'https://images.unsplash.com/photo-1500595046743-cd271d694d30?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Homepage'
      },
      {
        image: 'https://images.unsplash.com/photo-1559181567-c3190ca9959b?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Hoeve-ijs'
      },
      {
        image: 'https://images.unsplash.com/photo-1509440159596-0249088772ff?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Bakkerij'
      },
      {
        image: 'https://images.unsplash.com/photo-1595981267035-7b04ca84a82d?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Winkel'
      },
      {
        image: 'https://images.unsplash.com/photo-1472653816316-3ad6f10a6592?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Kampen'
      },
      {
        image: 'https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Boerderijleven'
      }
    ],
    interval: 2500
  },
  hvh: {
    slides: [
      {
        image: 'https://images.unsplash.com/photo-1450101499163-c8848c66ca85?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Homepage'
      },
      {
        image: 'https://images.unsplash.com/photo-1554224154-26032ffc0d07?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Verzekeringen'
      },
      {
        image: 'https://images.unsplash.com/photo-1560472355-536de3962603?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Services'
      },
      {
        image: 'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Contact'
      },
      {
        image: 'https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800&h=1000&fit=crop&q=85&auto=format',
        label: 'Over KBC'
      }
    ],
    interval: 2400
  }
};

// ── Initialize reels
function initReels() {
  Object.keys(reelData).forEach(key => {
    const container = document.querySelector(`[data-reel="${key}"]`);
    if (!container) return;

    const data = reelData[key];

    // Create slide elements (images are lazy-loaded via IntersectionObserver)
    data.slides.forEach((slide, i) => {
      const div = document.createElement('div');
      div.className = 'reel-slide' + (i === 0 ? ' active' : '');
      div.dataset.bg = slide.image; // defer image loading
      div.dataset.label = slide.label;
      container.appendChild(div);
    });

    // Store state
    container._currentSlide = 0;
    container._totalSlides = data.slides.length;
    container._interval = data.interval;
    container._timer = null;
    container._data = data;
  });
}

// ── Start/stop reel on hover
function setupReelHovers() {
  document.querySelectorAll('.project-card').forEach(card => {

    // ── Video cards (real mp4)
    // Skip if already initialized (prevent duplicate listeners)
    if (card._videoInit) return;
    const video = card.querySelector('.card-video');
    if (video) {
      card._videoInit = true;
      card.addEventListener('mouseenter', () => {
        video.currentTime = 0;
        video.play().catch(() => {});
      });
      card.addEventListener('mouseleave', () => {
        video.pause();
      });
      // Auto-play on mobile — lower threshold so videos trigger earlier
      if ('ontouchstart' in window) {
        const obs = new IntersectionObserver((entries) => {
          entries.forEach(e => {
            if (e.isIntersecting && e.intersectionRatio > 0.3) {
              card.classList.add('mobile-active');
              video.play().catch(() => {});
            } else {
              card.classList.remove('mobile-active');
              video.pause();
            }
          });
        }, { threshold: [0, 0.3] });
        obs.observe(card);
      }
      return; // skip slideshow logic
    }

    // ── Slideshow cards (image reel)
    const reelContainer = card.querySelector('.reel-slides');
    if (!reelContainer) return;

    const labelEl = card.querySelector('.reel-label-text');
    const counterEl = card.querySelector('.reel-counter');

    card.addEventListener('mouseenter', () => {
      startReel(reelContainer, labelEl, counterEl);
    });

    card.addEventListener('mouseleave', () => {
      stopReel(reelContainer, labelEl, counterEl);
    });

    // Auto-play on mobile (intersection observer)
    if ('ontouchstart' in window) {
      const obs = new IntersectionObserver((entries) => {
        entries.forEach(e => {
          if (e.isIntersecting && e.intersectionRatio > 0.6) {
            startReel(reelContainer, labelEl, counterEl);
          } else {
            stopReel(reelContainer, labelEl, counterEl);
          }
        });
      }, { threshold: [0, 0.6] });
      obs.observe(card);
    }
  });
}

function startReel(container, labelEl, counterEl) {
  if (container._timer) return;

  const advance = () => {
    const slides = container.querySelectorAll('.reel-slide');
    const current = container._currentSlide;
    const next = (current + 1) % container._totalSlides;

    // Remove active + kenburns from old
    slides[current].classList.remove('active', 'kenburns');

    // Add to new
    slides[next].classList.add('active', 'kenburns');

    container._currentSlide = next;

    // Update label
    if (labelEl && container._data) {
      labelEl.textContent = container._data.slides[next].label;
    }
    // Update counter
    if (counterEl) {
      counterEl.textContent = `${next + 1} / ${container._totalSlides}`;
    }
  };

  // Add kenburns to current slide
  const slides = container.querySelectorAll('.reel-slide');
  slides[container._currentSlide].classList.add('kenburns');

  container._timer = setInterval(advance, container._interval);
}

function stopReel(container, labelEl, counterEl) {
  if (container._timer) {
    clearInterval(container._timer);
    container._timer = null;
  }

  // Reset to first slide
  const slides = container.querySelectorAll('.reel-slide');
  slides.forEach((s, i) => {
    s.classList.remove('active', 'kenburns');
    if (i === 0) s.classList.add('active');
  });
  container._currentSlide = 0;

  // Reset label/counter
  if (labelEl && container._data) {
    labelEl.textContent = container._data.slides[0].label;
  }
  if (counterEl) {
    counterEl.textContent = `1 / ${container._totalSlides}`;
  }
}

// ── Loader — use DOMContentLoaded instead of 'load' so we don't wait for videos
document.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => document.getElementById('loader').classList.add('done'), 2300);
});

// ── Mobile menu
const menuBtn = document.getElementById('menuBtn');
const mobileNav = document.getElementById('mobileNav');
let mobOpen = false;
menuBtn.addEventListener('click', () => {
  mobOpen = !mobOpen;
  mobileNav.classList.toggle('open', mobOpen);
  menuBtn.textContent = mobOpen ? 'Sluit' : 'Menu';
});
function closeMob() {
  mobOpen = false;
  mobileNav.classList.remove('open');
  menuBtn.textContent = 'Menu';
}

// ── Infinite circular carousel with MOMENTUM (like spinning a wheel)
const track = document.getElementById('dragTrack');
let isDragging = false, startX, startY, dragMoved = false;
let currentOffset = 0;
let touchDirection = null;

// Velocity / momentum tracking
let velocity = 0;
let lastMoveTime = 0;
let lastMoveX = 0;
let momentumRAF = null;
const FRICTION = 0.94;        // How fast the spin decays (higher = longer spin)
const VELOCITY_SCALE = 1.8;   // How much the throw amplifies
const MIN_VELOCITY = 0.3;     // Below this, stop the animation

// Recreate video elements in cloned cards so mobile browsers treat them as fresh
function refreshClonedVideos(clone) {
  clone.querySelectorAll('.card-video').forEach(oldVid => {
    const newVid = document.createElement('video');
    newVid.className = oldVid.className;
    newVid.src = oldVid.src;
    newVid.muted = true;
    newVid.loop = true;
    newVid.playsInline = true;
    newVid.preload = 'none';
    newVid.setAttribute('playsinline', '');
    newVid.setAttribute('muted', '');
    oldVid.parentNode.replaceChild(newVid, oldVid);
  });
}

// Clone cards for infinite loop effect (no duplicate neighbours)
function setupInfiniteTrack() {
  const cards = Array.from(track.querySelectorAll('.project-card'));
  const n = cards.length;

  // Append clones shifted by 1: last original (n-1) != first append (0→1)
  // Sequence: [1, 2, 3, ..., n-1, 0]
  for (let i = 1; i <= n; i++) {
    const cloneEnd = cards[i % n].cloneNode(true);
    cloneEnd.classList.add('clone');
    refreshClonedVideos(cloneEnd);
    track.appendChild(cloneEnd);
  }

  // Prepend clones: last prepend card (reading L→R) must != first original (card 0)
  // We want L→R: [n-2, n-3, ..., 0, n-1] → last = n-1, first orig = 0 ✓
  // insertBefore(firstChild) reverses iteration order,
  // so iterate: [n-1, 0, 1, 2, ..., n-2]
  const prependIter = [n - 1];
  for (let i = 0; i < n - 1; i++) prependIter.push(i);
  prependIter.forEach(i => {
    const cloneStart = cards[i].cloneNode(true);
    cloneStart.classList.add('clone');
    refreshClonedVideos(cloneStart);
    track.insertBefore(cloneStart, track.firstChild);
  });

  const cardWidth = cards[0].offsetWidth + 32;
  currentOffset = -(cardWidth * n);
  track.style.transform = `translateX(${currentOffset}px)`;
}

function getOriginalWidth() {
  const origCards = track.querySelectorAll('.project-card:not(.clone)');
  if (origCards.length === 0) return 1;
  const cardWidth = origCards[0].offsetWidth + 32;
  return cardWidth * origCards.length;
}

function wrapOffset() {
  const origWidth = getOriginalWidth();
  if (currentOffset > 0) {
    currentOffset -= origWidth;
    track.style.transition = 'none';
    track.style.transform = `translateX(${currentOffset}px)`;
  } else if (currentOffset < -(origWidth * 2)) {
    currentOffset += origWidth;
    track.style.transition = 'none';
    track.style.transform = `translateX(${currentOffset}px)`;
  }
}

function applyOffset() {
  track.style.transition = 'none';
  track.style.transform = `translateX(${currentOffset}px)`;
  wrapOffset();
  highlightCenterCard();
}

// ── Highlight the most central card
function highlightCenterCard() {
  const viewportCenter = window.innerWidth / 2;
  const cards = track.querySelectorAll('.project-card');
  let closestCard = null;
  let closestDist = Infinity;

  cards.forEach(card => {
    const rect = card.getBoundingClientRect();
    const cardCenter = rect.left + rect.width / 2;
    const dist = Math.abs(cardCenter - viewportCenter);
    if (dist < closestDist) {
      closestDist = dist;
      closestCard = card;
    }
  });

  cards.forEach(card => {
    if (card === closestCard) {
      card.classList.add('center-card');
    } else {
      card.classList.remove('center-card');
    }
  });
}

// ── Momentum animation loop (the "spinning wheel" effect)
function startMomentum() {
  if (momentumRAF) cancelAnimationFrame(momentumRAF);

  function tick() {
    velocity *= FRICTION;

    if (Math.abs(velocity) < MIN_VELOCITY) {
      velocity = 0;
      momentumRAF = null;
      return;
    }

    currentOffset += velocity;
    applyOffset();
    momentumRAF = requestAnimationFrame(tick);
  }

  momentumRAF = requestAnimationFrame(tick);
}

function stopMomentum() {
  if (momentumRAF) {
    cancelAnimationFrame(momentumRAF);
    momentumRAF = null;
  }
  velocity = 0;
}

// Track velocity from drag movements
function trackVelocity(currentX) {
  const now = performance.now();
  const dt = now - lastMoveTime;
  if (dt > 0 && dt < 100) {  // only count recent moves
    velocity = ((currentX - lastMoveX) / dt) * 16 * VELOCITY_SCALE;
  }
  lastMoveTime = now;
  lastMoveX = currentX;
}

setupInfiniteTrack();
setupReelHovers();
highlightCenterCard();

// ── Start loading videos once loader fades (~2.3s)
// This keeps initial page load fast, but buffers videos before the user scrolls down
setTimeout(() => {
  document.querySelectorAll('.card-video').forEach(vid => {
    vid.addEventListener('loadeddata', () => {
      vid.setAttribute('data-loaded', 'true');
    });
    vid.preload = 'auto';
    vid.load();
  });
}, 2400);

// ── Mouse drag
track.addEventListener('mousedown', (e) => {
  stopMomentum();
  isDragging = true; dragMoved = false;
  startX = e.pageX;
  lastMoveX = e.pageX;
  lastMoveTime = performance.now();
  velocity = 0;
  track.classList.add('dragging');
  track.style.transition = 'none';
  e.preventDefault();
});

document.addEventListener('mouseup', () => {
  if (isDragging) {
    isDragging = false;
    track.classList.remove('dragging');
    // Launch momentum with current velocity
    startMomentum();
  }
});

document.addEventListener('mousemove', (e) => {
  if (!isDragging) return;
  dragMoved = true;
  const dx = e.pageX - startX;
  currentOffset += dx;
  applyOffset();
  trackVelocity(e.pageX);
  startX = e.pageX;
});

// ── Touch — with direction lock + momentum
track.addEventListener('touchstart', (e) => {
  stopMomentum();
  isDragging = true; dragMoved = false;
  touchDirection = null;
  startX = e.touches[0].pageX;
  startY = e.touches[0].pageY;
  lastMoveX = e.touches[0].pageX;
  lastMoveTime = performance.now();
  velocity = 0;
  track.style.transition = 'none';
}, { passive: true });

document.addEventListener('touchend', () => {
  if (isDragging) {
    isDragging = false;
    touchDirection = null;
    startMomentum();
  }
});

document.addEventListener('touchmove', (e) => {
  if (!isDragging) return;
  const dx = e.touches[0].pageX - startX;
  const dy = e.touches[0].pageY - startY;

  if (!touchDirection) {
    if (Math.abs(dx) < 5 && Math.abs(dy) < 5) return;
    touchDirection = Math.abs(dx) > Math.abs(dy) ? 'horizontal' : 'vertical';
  }

  if (touchDirection === 'vertical') {
    isDragging = false;
    return;
  }

  e.preventDefault();
  dragMoved = true;
  currentOffset += dx;
  applyOffset();
  trackVelocity(e.touches[0].pageX);
  startX = e.touches[0].pageX;
  startY = e.touches[0].pageY;
}, { passive: false });

// Prevent card action during drag
track.addEventListener('mousedown', () => { dragMoved = false; });

// ── Video Modal
const videoModal = document.getElementById('videoModal');
const modalVideo = document.getElementById('modalVideo');
const modalTitle = document.getElementById('modalTitle');
const modalClose = document.getElementById('videoModalClose');

function openVideoModal(videoSrc, title) {
  modalVideo.src = videoSrc;
  modalTitle.textContent = title;
  videoModal.classList.add('active');
  modalVideo.play();
  document.body.style.overflow = 'hidden';
}

function closeVideoModal() {
  videoModal.classList.remove('active');
  modalVideo.pause();
  modalVideo.src = '';
  document.body.style.overflow = '';
}

modalClose.addEventListener('click', (e) => { e.stopPropagation(); closeVideoModal(); });
videoModal.addEventListener('click', (e) => { if (e.target === videoModal) closeVideoModal(); });
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeVideoModal(); });

// Card click → open video (only if not dragging)
track.querySelectorAll('.project-card').forEach(card => {
  card.addEventListener('click', (e) => {
    if (dragMoved) { e.preventDefault(); return; }
    const videoSrc = card.getAttribute('data-video');
    if (videoSrc) {
      const title = card.querySelector('h3')?.textContent || '';
      openVideoModal(videoSrc, title);
    }
  });
});

// ── Toggle diensten accordion
function toggleDienst(el) {
  el.classList.toggle('open');
}

// ── Init reels
initReels();

// ── Lazy-load reel slide images when portfolio section nears viewport
const lazyObs = new IntersectionObserver((entries, observer) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.querySelectorAll('.reel-slide[data-bg]').forEach(slide => {
        slide.style.backgroundImage = `url(${slide.dataset.bg})`;
        delete slide.dataset.bg;
      });
      observer.unobserve(e.target);
    }
  });
}, { rootMargin: '200px 0px' }); // start loading 200px before visible
document.querySelectorAll('.reel-slides').forEach(el => lazyObs.observe(el.closest('.project-card') || el));

// ── Scroll reveal
const reveals = document.querySelectorAll('.reveal');
const obs = new IntersectionObserver((entries) => {
  entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('vis'); });
}, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });
reveals.forEach(el => obs.observe(el));

// ── Smooth anchors
document.querySelectorAll('a[href^="#"]').forEach(a => {
  a.addEventListener('click', e => {
    const href = a.getAttribute('href');
    if (href === '#') return;
    e.preventDefault();
    document.querySelector(href)?.scrollIntoView({ behavior: 'smooth' });
  });
});
</script>
</body>
</html>
